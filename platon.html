<!DOCTYPE html>
<html>
  <head>
    <meta lang="fr" charset="utf-8"/>
    <title>Platon</title>
    <style>
      body { margin: 0; }
      canvas { width: 100%; height: 100% }
    </style>

        <!-- Latest compiled and minified jQuery -->
    <script type="text/javascript"
	    src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js">
    </script>


  </head>
  
  <body>
    <script src="js/three.js"></script>
    <script>//src="js/platon-app.js">

     var scene = new THREE.Scene();
     var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );
     var renderer = new THREE.WebGLRenderer();
     renderer.setSize( window.innerWidth/2, window.innerHeight/2 );
     document.body.appendChild( renderer.domElement );
     
     var geometry = new THREE.Geometry();
     
     var r = 1.0;
     var c = Math.cos(60);
     
     geometry.vertices.push(
       new THREE.Vector3(1, 0, 0),
       new THREE.Vector3(0, 1, 0),
       new THREE.Vector3(0, 0, 1),
       new THREE.Vector3(1, 1, 1)
     );
     
     geometry.faces.push( new THREE.Face3( 0, 1, 2 ) );
     geometry.faces.push( new THREE.Face3( 0, 1, 3 ) );
     geometry.faces.push( new THREE.Face3( 0, 2, 3 ) );
     geometry.faces.push( new THREE.Face3( 1, 2, 3 ) );
     


var r = 2.0;
     
     var material = new THREE.MeshBasicMaterial( { color: 0xffffff, wireframe: true } );
     var cube = new THREE.Mesh( geometry, material );
     scene.add( cube );

     camera.position.z = 5;

     var render = function () {
       requestAnimationFrame( render );

       cube.rotation.x += 0.01;
       cube.rotation.y += 0.01;
       r+=0.02;
       cube.scale.x = r*Math.cos(r);
       cube.scale.y = r*Math.cos(r);
       cube.scale.z = r*Math.cos(r);

       renderer.render(scene, camera);
       };

     render();
     
     var ws = new WebSocket("ws://localhost:1234/echo");
     
     
     

     ws.onmessage=function(evt){
       $("#title").html(evt.data);
     };
    
         
     ws.onclose = function(e) {
       $("#title").html("Close");
     };
     
     
     ws.onerror = function(e){
       $("#title").html("Close");
       console.log('Erreur websocket');
       ws.close();
     };
     
     setTimeout(function(){console.log("sent"); ws.send("test");}, 4000);

     
</script>
<p id="title"></p>
  </body>
</html>
